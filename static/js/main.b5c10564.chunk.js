(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{51:function(e,t,n){},53:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(1),a=n.n(r),s=n(22),i=n.n(s),o=(n(51),n(52),n(20)),j=n(9),l=(n(53),n(11)),u=n.n(l),b=n(12),d=n(8),O=n(78),m=n(15),h=n(16),x=n.p+"static/media/bg-photo.0216d7e3.jpg";function p(){var e=Object(m.a)(["\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  z-index: -2;\n  background-image: url(",");\n  background-repeat: no-repeat;\n  background-attachment: fixed; \n  background-size: cover;\n  &:before {\n    content: '';\n    z-index: -1;\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    background-image: linear-gradient(to bottom right,#002f4b,#dc4225);\n    opacity: .5; \n  }\n"]);return p=function(){return e},e}var f=h.a.div(p(),x),g=function(){return Object(c.jsx)(f,{})},v=n(79),y=n(80),N=n(21),S=n.n(N);function w(){var e=Object(m.a)(["\n  padding: .5rem 1rem;\n  display: flex;\n  align-items: center;\n  &:hover {\n    cursor: pointer;\n    opacity: .5;\n  }\n"]);return w=function(){return e},e}function C(){var e=Object(m.a)(["\n  padding: .5rem;\n"]);return C=function(){return e},e}function U(){var e=Object(m.a)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n"]);return U=function(){return e},e}var _=Object(h.a)(O.a)(U()),k=(Object(h.a)(O.a)(C()),h.a.div(w())),E=n(27),L=function(e){var t=e.comments,n=e.setComments,a=e.currentUser,s=e.content,i=e._id,o=e.author,l=e.createdAt,b=e.post,d=Object(r.useState)(!1),m=Object(j.a)(d,2),h=m[0],x=m[1],p=Object(r.useState)(s),f=Object(j.a)(p,2),g=f[0],N=f[1],w=function(){window.confirm("Are you sure you want to delete this comment? This action cannot be undone.")&&u.a.delete("/posts/".concat(b._id,"/comments/").concat(i)).then((function(e){n(t.filter((function(t){return t._id!==e.data._id})))})).catch((function(e){return console.log(e)}))};return Object(c.jsxs)(O.a,{fluid:!0,className:"pl-4",children:[h?Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),u.a.put("/posts/".concat(b._id,"/comments/").concat(i),{content:g},{headers:{Authorization:"bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}}).then((function(e){console.log(e.data),n(t.map((function(t){return t._id!==i?t:e.data}))),x(!1)}))}(e)},children:[Object(c.jsx)(v.a,{type:"textarea",rows:"5",value:g,name:"content",onChange:function(e){return N(e.target.value)}}),Object(c.jsxs)(_,{className:"my-2",children:[Object(c.jsx)(y.a,{className:"mr-3",type:"button",onClick:function(){return x(!1)},color:"danger",children:"Cancel"}),Object(c.jsx)(y.a,{type:"submit",color:"primary",children:"Edit"})]})]})}):Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{children:"by "}),Object(c.jsx)("span",{style:{color:o._id===a._id?"royalblue":""},children:o.email}),Object(c.jsxs)("span",{children:["\xa0 ",S()(l).fromNow()]}),Object(c.jsx)("p",{children:s})]}),a._id===o._id&&!h&&Object(c.jsxs)(_,{children:[Object(c.jsxs)(k,{onClick:function(){return x(!h)},children:[Object(c.jsx)(E.b,{size:24,fill:"yellow"}),Object(c.jsx)("p",{className:"mb-0",children:"Edit"})]}),Object(c.jsxs)(k,{onClick:function(){return w},children:[Object(c.jsx)(E.a,{size:24,fill:"lightcoral"}),Object(c.jsx)("p",{className:"mb-0",children:"Delete"})]})]})]})},z=n(43),I=n(86),A=function(e){var t=e.currentUser,n=e._id,a=e.author,s=e.title,i=e.content,l=e.createdAt,b=Object(r.useState)(!1),d=Object(j.a)(b,2),m=d[0],h=d[1],x=Object(r.useState)([]),p=Object(j.a)(x,2),f=p[0],g=p[1],v=Object(r.useState)(!1),y=Object(j.a)(v,2),N=y[0],w=y[1];return Object(r.useEffect)((function(){h(!0),u.a.get("/posts/".concat(n,"/comments")).then((function(e){g(e.data),h(!1)})).catch((function(e){return console.log(e)}))}),[]),Object(c.jsxs)(O.a,{className:"mb-3 border p-2",style:{borderRadius:"4px"},children:[m&&Object(c.jsx)(q,{}),Object(c.jsxs)("span",{children:["by ",a.email]}),Object(c.jsxs)("span",{children:["\xa0 ",S()(l).fromNow()]}),Object(c.jsx)("h3",{children:s}),Object(c.jsx)("p",{children:i}),Object(c.jsxs)("div",{onClick:function(){return w(!N)},style:{userSelect:"none",cursor:"pointer"},className:"d-flex align-items-center",children:[Object(c.jsx)(z.a,{size:24}),"\xa0",Object(c.jsxs)("p",{className:"pb-0 mb-0",children:["Comments(",f.length,")"]})]}),Object(c.jsx)(I.a,{in:N,timeout:300,classNames:"fade",unmountOnExit:!0,children:Object(c.jsxs)("div",{children:[Object(c.jsx)("hr",{style:{background:"white"},className:"mt-1"}),!t&&Object(c.jsx)(T,{info:" to post comments!"}),t&&Object(c.jsx)(W,{setComments:g,comments:f,currentUser:t,post_id:n}),f.map((function(e){return Object(c.jsx)(L,Object(o.a)({comments:f,setComments:g,currentUser:t},e),e._id)}))]})})]})},D=n(81);function J(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-image: linear-gradient(to bottom right,#002f4b,#dc4225);\n  opacity: .5; \n"]);return J=function(){return e},e}var P=h.a.div(J()),q=function(){return Object(c.jsx)(P,{children:Object(c.jsx)(D.a,{color:"primary"})})},F=n(82),R=function(e){var t=e.currentUser;return Object(c.jsxs)(F.a,{style:{height:"50px"},className:"px-4 justify-content-between align-items-center",children:[Object(c.jsx)(b.b,{className:"pb-0",to:"/",children:Object(c.jsx)("h3",{className:"pb-0",children:"Home"})}),!t&&Object(c.jsxs)("div",{className:"d-flex align-items-center",children:[Object(c.jsx)(b.b,{className:"pb-0",to:"/login",children:Object(c.jsx)("h3",{className:"pb-0",children:"Login"})}),Object(c.jsx)(b.b,{className:"pb-0 ml-2",to:"/sign-up",children:Object(c.jsx)("h3",{className:"pb-0",children:"Sign Up"})})]}),t&&Object(c.jsxs)("div",{className:"d-flex align-items-center",children:[Object(c.jsxs)("p",{className:"mb-0",children:["Logged in as ",t.email,"\xa0"]}),Object(c.jsx)(b.b,{to:"/logout",children:Object(c.jsx)("h3",{className:"pb-0",children:"Logout"})})]})]})},T=function(e){var t=e.info;return Object(c.jsx)(O.a,{className:"my-2 d-flex align-items-center p-2 border",style:{borderRadius:"4px"},children:Object(c.jsxs)("h4",{children:[Object(c.jsx)(b.b,{to:"/login",children:"Login"}),"\xa0or\xa0",Object(c.jsx)(b.b,{to:"/sign-up",children:"Sign Up"}),t]})})},B=n(83),H=n(84),M=n(85),W=function(e){var t=e.comments,n=e.setComments,a=e.currentUser,s=e.post_id,i=Object(r.useState)(""),o=Object(j.a)(i,2),l=o[0],b=o[1];return Object(c.jsx)(O.a,{children:Object(c.jsxs)(B.a,{onSubmit:function(e){return function(e){e.preventDefault(),u.a.post("/posts/".concat(s,"/comments"),{content:l,author:a._id,post:s},{headers:{Authorization:"bearer ".concat(JSON.parse(localStorage.getItem("user")).token)}}).then((function(e){console.log(e.data),n([e.data,t])}))}(e)},children:[Object(c.jsxs)(H.a,{children:[Object(c.jsx)(M.a,{for:"content",children:"Content"}),Object(c.jsx)(v.a,{placeholder:"What are you thinking about..?",onChange:function(e){return b(e.target.value)},type:"textarea",name:"content"})]}),Object(c.jsx)(H.a,{children:Object(c.jsx)(y.a,{color:"primary",children:"Comment"})})]})})};function G(){var e=Object(m.a)(["\n  width: 100%;\n  padding: .5rem;\n"]);return G=function(){return e},e}function K(){var e=Object(m.a)(["\n  width: 100%;\n  padding: .5rem;\n  display: flex;\n  align-items: center;\n"]);return K=function(){return e},e}function Q(){var e=Object(m.a)(["\n  max-width: 400px;\n  margin-left: 1rem;\n  margin-top: 1rem;\n  border: 1px solid white;\n  border-radius: 4px;\n  padding: .5rem;\n  display: flex;\n  flex-direction: column;\n"]);return Q=function(){return e},e}var V=h.a.div(Q()),X=Object(h.a)(O.a)(K()),Y=Object(h.a)(O.a)(G()),Z=n(44),$=function(e){var t=e._id,n=e.author,r=e.title,a=e.content,s=e.createdAt;return Object(c.jsxs)(V,{children:[Object(c.jsxs)(X,{children:[Object(c.jsx)(Z.a,{}),Object(c.jsx)("p",{className:"mb-0",children:n.email}),Object(c.jsxs)("p",{className:"mb-0",children:["\xa0",S()(s).fromNow()]})]}),Object(c.jsxs)(Y,{children:[Object(c.jsx)(b.b,{to:"/posts/".concat(t),children:Object(c.jsx)("h3",{children:r.length>30?r.slice(0,30)+"...":r})}),Object(c.jsx)("p",{children:a.length>150?a.slice(0,150)+"...":a})]})]})},ee=function(e){var t=e.posts,n=e.currentUser;return Object(c.jsx)(O.a,{className:"d-flex align-items-center flex-wrap justify-content-around",children:t.map((function(e){return Object(c.jsx)($,Object(o.a)(Object(o.a)({},e),{},{currentUser:n}),e._id)}))})},te=function(e){var t=e.setUser,n=Object(d.e)(),a=Object(r.useState)(""),s=Object(j.a)(a,2),i=s[0],o=s[1],l=Object(r.useState)(""),b=Object(j.a)(l,2),m=b[0],h=b[1];return Object(c.jsxs)(O.a,{children:[Object(c.jsx)("h3",{className:"text-center",children:"Login"}),Object(c.jsxs)(B.a,{onSubmit:function(e){return function(e){e.preventDefault(),u.a.post("/users/login",{email:i,password:m}).then((function(e){console.log(e.data),localStorage.setItem("user",JSON.stringify(e.data)),t(e.data.user),n.push("/")}))}(e)},children:[Object(c.jsxs)(H.a,{children:[Object(c.jsx)(M.a,{for:"email",children:"Email"}),Object(c.jsx)(v.a,{onChange:function(e){return o(e.target.value)},type:"email",name:"email",required:!0})]}),Object(c.jsxs)(H.a,{children:[Object(c.jsx)(M.a,{for:"password",children:"Password"}),Object(c.jsx)(v.a,{onChange:function(e){return h(e.target.value)},type:"password",name:"password",required:!0})]}),Object(c.jsx)(H.a,{className:"text-center",children:Object(c.jsx)(y.a,{color:"primary",children:"Login"})})]})]})},ne=function(){var e=Object(d.e)(),t=Object(r.useState)(""),n=Object(j.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(""),o=Object(j.a)(i,2),l=o[0],b=o[1];return Object(c.jsxs)(O.a,{children:[Object(c.jsx)("h3",{className:"text-center",children:"Sign Up"}),Object(c.jsxs)(B.a,{onSubmit:function(t){return function(t){t.preventDefault(),u.a.post("/users/sign-up",{email:a,password:l}).then((function(t){e.push("/users/login")})).catch((function(e){return console.log(e)}))}(t)},children:[Object(c.jsxs)(H.a,{children:[Object(c.jsx)(M.a,{for:"email",children:"Email"}),Object(c.jsx)(v.a,{onChange:function(e){return s(e.target.value)},type:"email",name:"email",required:!0})]}),Object(c.jsxs)(H.a,{children:[Object(c.jsx)(M.a,{for:"password",required:!0,children:"Password"}),Object(c.jsx)(v.a,{onChange:function(e){return b(e.target.value)},type:"password",name:"password"})]}),Object(c.jsx)(H.a,{className:"text-center",children:Object(c.jsx)(y.a,{type:"submit",color:"primary",children:"Sign Up"})})]})]})},ce=function(e){var t=e.setUser,n=Object(d.e)();return Object(r.useEffect)((function(){localStorage.removeItem("user"),t(void 0),n.push("/")}),[]),Object(c.jsx)(q,{})};var re=function(){var e=Object(r.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(!1),i=Object(j.a)(s,2),l=i[0],m=i[1],h=Object(r.useState)(void 0),x=Object(j.a)(h,2),p=x[0],f=x[1];return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e&&f(e.user),m(!0),u.a.get("/posts").then((function(e){a(e.data),m(!1)}))}),[]),Object(c.jsx)(O.a,{className:"p-relative",fluid:!0,children:Object(c.jsxs)(b.a,{children:[l&&Object(c.jsx)(q,{}),Object(c.jsx)(g,{}),Object(c.jsx)(R,{currentUser:p}),Object(c.jsx)(d.a,{exact:!0,path:"/",render:function(){return Object(c.jsx)(ee,{currentUser:p,setPosts:a,posts:n})}}),Object(c.jsx)(d.a,{exact:!0,path:"/login",render:function(){return Object(c.jsx)(te,{setUser:f})}}),Object(c.jsx)(d.a,{exact:!0,path:"/sign-up",render:function(){return Object(c.jsx)(ne,{})}}),Object(c.jsx)(d.a,{exact:!0,path:"/logout",render:function(){return Object(c.jsx)(ce,{setUser:f})}}),n.map((function(e){return Object(c.jsx)(d.a,{exact:!0,path:"/posts/".concat(e._id),render:function(){return Object(c.jsx)(A,Object(o.a)(Object(o.a)({},e),{},{currentUser:p}))}})}))]})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,87)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};u.a.defaults.baseURL="https://nodejsblog-api.herokuapp.com/api",i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(re,{})}),document.getElementById("root")),ae()}},[[76,1,2]]]);
//# sourceMappingURL=main.b5c10564.chunk.js.map